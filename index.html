<!DOCTYPE html>
<html>

<head>
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css'>

    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
</head>

<body ng-app="app">

    <div ng-controller="PostsCtrl" class="container">
        <h1>Najnowsze posty</h1>
        <input ng-model='postBody' class='form-control' />
        <button ng-click="addPost()" class="btn btn-default">Dodaj post</button>
        <ul class="list-group">
            <li ng-repeat="post in posts" class="list-group-item">
                <strong>@{{post.username}}</strong>
                <span>{{post.body}}</span>
            </li>

        </ul>
    </div>

    <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-rc.4/angular.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-rc.4/angular-route.js'></script>

    <script>
        var app = angular.module('app', [])
        app.controller('PostsCtrl', function($scope, $http) {
            $http.get('http://localhost:3000/api/posts')
                .success(function(posts) {
                    $scope.posts = posts
                })
            $scope.addPost = function() {
                if ($scope.postBody) {
                    $scope.posts.unshift({
                        username: 'nyweron',
                        body: $scope.postBody
                    })
                    $scope.postBody = null
                }

            }
        })
    </script>

</body>

</html>