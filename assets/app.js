var app=angular.module("app",["ngRoute"]);angular.module("app").controller("ApplicationCtrl",["$scope","UserSvc",function(e,t){e.$on("login",function(t,o){e.currentUser=o}),e.$on("register",function(t,o){e.registerResponse=o}),e.disableRegisterResponse=function(){e.registerResponse=null},e.logout=function(){console.log("logout"),e.currentUser=null,t.logout()}}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc",function(e,t){e.login=function(o,n){t.login(o,n).then(function(t){e.$emit("login",t)})}}]),app.controller("PostsCtrl",["$scope","PostsSvc",function(e,t){e.addPost=function(){e.postBody&&t.create({username:"nyweron",body:e.postBody}).success(function(t){e.posts.unshift(t),e.postBody=null})},t.fetch().success(function(t){e.posts=t})}]),app.service("PostsSvc",["$http",function(e){this.fetch=function(){return e.get("/posts")},this.create=function(t){return e.post("/posts",t)}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc",function(e,t){e.register=function(o,n){e.nameRequired="",e.passwordRequired="",e.nameRequired=o?"":"Name Required",e.passwordRequired=n?"":"Password Required",o&&n&&t.register(o,n).then(function(t){e.$emit("register","Konto zarejestrowane poprawnie, zaloguj siÄ™."),e.username="",e.password=""})}}]),angular.module("app").config(["$routeProvider",function(e){e.when("/",{controller:"PostsCtrl",templateUrl:"posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"login.html"}).when("/logout",{controller:"ApplicationCtrl",templateUrl:"login.html"})}]),angular.module("app").service("UserSvc",["$http",function(e){var t=this;t.getUser=function(){return e.get("/users").then(function(e){return console.log("GetUser response.data ",e.data),e.data})},t.login=function(o,n){return e.post("/sessions",{username:o,password:n}).then(function(o){return console.log("Login:",o.data),t.token=o.data,e.defaults.headers.common["X-Auth"]=o.data,t.getUser()})},t.register=function(t,o){return e.post("/users",{username:t,password:o}).then(function(e){return e})},t.logout=function(){delete e.defaults.headers.common["X-Auth"]}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJlZ2lzdGVyLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1c2VyLnN2Yy5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIlVzZXJTdmMiLCIkb24iLCJfIiwidXNlciIsImN1cnJlbnRVc2VyIiwicmVzcG9uc2UiLCJyZWdpc3RlclJlc3BvbnNlIiwiZGlzYWJsZVJlZ2lzdGVyUmVzcG9uc2UiLCJsb2dvdXQiLCJjb25zb2xlIiwibG9nIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwidGhlbiIsIiRlbWl0IiwiUG9zdHNTdmMiLCJhZGRQb3N0IiwicG9zdEJvZHkiLCJjcmVhdGUiLCJib2R5Iiwic3VjY2VzcyIsInBvc3QiLCJwb3N0cyIsInVuc2hpZnQiLCJmZXRjaCIsInNlcnZpY2UiLCIkaHR0cCIsInRoaXMiLCJnZXQiLCJyZWdpc3RlciIsIm5hbWVSZXF1aXJlZCIsInBhc3N3b3JkUmVxdWlyZWQiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsInN2YyIsImdldFVzZXIiLCJkYXRhIiwidG9rZW4iLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iXSwibWFwcGluZ3MiOiJBQUFBLElBQUFBLElBQUFDLFFBQUFDLE9BQUEsT0FDQSxZQ0RBRCxRQUFBQyxPQUFBLE9BQ0FDLFdBQUEsbUJBQUEsU0FBQSxVQUFBLFNBQUFDLEVBQUFDLEdBQ0FELEVBQUFFLElBQUEsUUFBQSxTQUFBQyxFQUFBQyxHQUNBSixFQUFBSyxZQUFBRCxJQUVBSixFQUFBRSxJQUFBLFdBQUEsU0FBQUMsRUFBQUcsR0FDQU4sRUFBQU8saUJBQUFELElBR0FOLEVBQUFRLHdCQUFBLFdBQ0FSLEVBQUFPLGlCQUFBLE1BR0FQLEVBQUFTLE9BQUEsV0FDQUMsUUFBQUMsSUFBQSxVQUNBWCxFQUFBSyxZQUFBLEtBQ0FKLEVBQUFRLGFDaEJBWixRQUFBQyxPQUFBLE9BQ0FDLFdBQUEsYUFBQSxTQUFBLFVBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFBQVksTUFBQSxTQUFBQyxFQUFBQyxHQUNBYixFQUFBVyxNQUFBQyxFQUFBQyxHQUNBQyxLQUFBLFNBQUFYLEdBQ0FKLEVBQUFnQixNQUFBLFFBQUFaLFNDTEFSLElBQUFHLFdBQUEsYUFBQSxTQUFBLFdBQUEsU0FBQUMsRUFBQWlCLEdBQ0FqQixFQUFBa0IsUUFBQSxXQUNBbEIsRUFBQW1CLFVBQ0FGLEVBQUFHLFFBQ0FQLFNBQUEsVUFDQVEsS0FBQXJCLEVBQUFtQixXQUNBRyxRQUFBLFNBQUFDLEdBQ0F2QixFQUFBd0IsTUFBQUMsUUFBQUYsR0FDQXZCLEVBQUFtQixTQUFBLFFBS0FGLEVBQUFTLFFBQUFKLFFBQUEsU0FBQUUsR0FDQXhCLEVBQUF3QixNQUFBQSxPQ2RBNUIsSUFBQStCLFFBQUEsWUFBQSxRQUFBLFNBQUFDLEdBRUFDLEtBQUFILE1BQUEsV0FDQSxPQUFBRSxFQUFBRSxJQUFBLFdBRUFELEtBQUFULE9BQUEsU0FBQUcsR0FDQSxPQUFBSyxFQUFBTCxLQUFBLFNBQUFBLE9DTkExQixRQUFBQyxPQUFBLE9BQ0FDLFdBQUEsZ0JBQUEsU0FBQSxVQUFBLFNBQUFDLEVBQUFDLEdBQ0FELEVBQUErQixTQUFBLFNBQUFsQixFQUFBQyxHQUlBZCxFQUFBZ0MsYUFBQSxHQUNBaEMsRUFBQWlDLGlCQUFBLEdBS0FqQyxFQUFBZ0MsYUFIQW5CLEVBR0EsR0FGQSxnQkFRQWIsRUFBQWlDLGlCQUhBbkIsRUFHQSxHQUZBLG9CQU1BRCxHQUFBQyxHQUNBYixFQUFBOEIsU0FBQWxCLEVBQUFDLEdBQ0FDLEtBQUEsU0FBQVQsR0FDQU4sRUFBQWdCLE1BQUEsV0FBQSxnREFDQWhCLEVBQUFhLFNBQUEsR0FDQWIsRUFBQWMsU0FBQSxTQzNCQWpCLFFBQUFDLE9BQUEsT0FDQW9DLFFBQUEsaUJBQUEsU0FBQUMsR0FDQUEsRUFDQUMsS0FBQSxLQUFBckMsV0FBQSxZQUFBc0MsWUFBQSxlQUNBRCxLQUFBLGFBQUFyQyxXQUFBLGVBQUFzQyxZQUFBLGtCQUNBRCxLQUFBLFVBQUFyQyxXQUFBLFlBQUFzQyxZQUFBLGVBQ0FELEtBQUEsV0FBQXJDLFdBQUEsa0JBQUFzQyxZQUFBLGtCQ05BeEMsUUFBQUMsT0FBQSxPQUNBNkIsUUFBQSxXQUFBLFFBQUEsU0FBQUMsR0FDQSxJQUFBVSxFQUFBVCxLQUNBUyxFQUFBQyxRQUFBLFdBQ0EsT0FBQVgsRUFBQUUsSUFBQSxVQUNBZixLQUFBLFNBQUFULEdBRUEsT0FEQUksUUFBQUMsSUFBQSx5QkFBQUwsRUFBQWtDLE1BQ0FsQyxFQUFBa0MsUUFHQUYsRUFBQTFCLE1BQUEsU0FBQUMsRUFBQUMsR0FDQSxPQUFBYyxFQUFBTCxLQUFBLGFBQ0FWLFNBQUFBLEVBQ0FDLFNBQUFBLElBQ0FDLEtBQUEsU0FBQVQsR0FJQSxPQUhBSSxRQUFBQyxJQUFBLFNBQUFMLEVBQUFrQyxNQUNBRixFQUFBRyxNQUFBbkMsRUFBQWtDLEtBQ0FaLEVBQUFjLFNBQUFDLFFBQUFDLE9BQUEsVUFBQXRDLEVBQUFrQyxLQUNBRixFQUFBQyxhQUdBRCxFQUFBUCxTQUFBLFNBQUFsQixFQUFBQyxHQUNBLE9BQUFjLEVBQUFMLEtBQUEsVUFDQVYsU0FBQUEsRUFDQUMsU0FBQUEsSUFDQUMsS0FBQSxTQUFBVCxHQUNBLE9BQUFBLEtBSUFnQyxFQUFBN0IsT0FBQSxrQkFDQW1CLEVBQUFjLFNBQUFDLFFBQUFDLE9BQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXHJcbiAgICAnbmdSb3V0ZSdcclxuXSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdBcHBsaWNhdGlvbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIFVzZXJTdmMpIHtcclxuICAgICAgICAkc2NvcGUuJG9uKCdsb2dpbicsIGZ1bmN0aW9uKF8sIHVzZXIpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRVc2VyID0gdXNlclxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgJHNjb3BlLiRvbigncmVnaXN0ZXInLCBmdW5jdGlvbihfLCByZXNwb25zZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUucmVnaXN0ZXJSZXNwb25zZSA9IHJlc3BvbnNlXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgJHNjb3BlLmRpc2FibGVSZWdpc3RlclJlc3BvbnNlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5yZWdpc3RlclJlc3BvbnNlID0gbnVsbFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImxvZ291dFwiKVxyXG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIgPSBudWxsXHJcbiAgICAgICAgICAgIFVzZXJTdmMubG9nb3V0KClcclxuICAgICAgICB9XHJcbiAgICB9KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0xvZ2luQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgVXNlclN2Yykge1xyXG4gICAgICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKHVzZXJuYW1lLCBwYXNzd29yZCkge1xyXG4gICAgICAgICAgICBVc2VyU3ZjLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZClcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ2xvZ2luJywgdXNlcilcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSkiLCJhcHAuY29udHJvbGxlcignUG9zdHNDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBQb3N0c1N2Yykge1xyXG4gICAgJHNjb3BlLmFkZFBvc3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLnBvc3RCb2R5KSB7XHJcbiAgICAgICAgICAgIFBvc3RzU3ZjLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogJ255d2Vyb24nLFxyXG4gICAgICAgICAgICAgICAgYm9keTogJHNjb3BlLnBvc3RCb2R5XHJcbiAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24ocG9zdCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBvc3RzLnVuc2hpZnQocG9zdClcclxuICAgICAgICAgICAgICAgICRzY29wZS5wb3N0Qm9keSA9IG51bGxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgUG9zdHNTdmMuZmV0Y2goKS5zdWNjZXNzKGZ1bmN0aW9uKHBvc3RzKSB7XHJcbiAgICAgICAgJHNjb3BlLnBvc3RzID0gcG9zdHNcclxuICAgIH0pXHJcbn0pIiwiYXBwLnNlcnZpY2UoJ1Bvc3RzU3ZjJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XHJcblxyXG4gICAgdGhpcy5mZXRjaCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9wb3N0cycpXHJcbiAgICB9XHJcbiAgICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKHBvc3QpIHtcclxuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL3Bvc3RzJywgcG9zdClcclxuICAgIH1cclxufV0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignUmVnaXN0ZXJDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBVc2VyU3ZjKSB7XHJcbiAgICAgICAgJHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkKSB7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5uYW1lUmVxdWlyZWQgPSAnJ1xyXG4gICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRSZXF1aXJlZCA9ICcnXHJcblxyXG4gICAgICAgICAgICBpZiAoIXVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubmFtZVJlcXVpcmVkID0gJ05hbWUgUmVxdWlyZWQnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5hbWVSZXF1aXJlZCA9ICcnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXBhc3N3b3JkKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRSZXF1aXJlZCA9ICdQYXNzd29yZCBSZXF1aXJlZCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRSZXF1aXJlZCA9ICcnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKHVzZXJuYW1lICYmIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgICAgICAgICBVc2VyU3ZjLnJlZ2lzdGVyKHVzZXJuYW1lLCBwYXNzd29yZClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ3JlZ2lzdGVyJywgXCJLb250byB6YXJlamVzdHJvd2FuZSBwb3ByYXduaWUsIHphbG9ndWogc2nEmS5cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJuYW1lID0gXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmQgPSBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSBlbHNlIHt9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29uZmlnKGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLndoZW4oJy8nLCB7IGNvbnRyb2xsZXI6ICdQb3N0c0N0cmwnLCB0ZW1wbGF0ZVVybDogJ3Bvc3RzLmh0bWwnIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvcmVnaXN0ZXInLCB7IGNvbnRyb2xsZXI6ICdSZWdpc3RlckN0cmwnLCB0ZW1wbGF0ZVVybDogJ3JlZ2lzdGVyLmh0bWwnIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvbG9naW4nLCB7IGNvbnRyb2xsZXI6ICdMb2dpbkN0cmwnLCB0ZW1wbGF0ZVVybDogJ2xvZ2luLmh0bWwnIH0pXHJcbiAgICAgICAgICAgIC53aGVuKCcvbG9nb3V0JywgeyBjb250cm9sbGVyOiAnQXBwbGljYXRpb25DdHJsJywgdGVtcGxhdGVVcmw6ICdsb2dpbi5odG1sJyB9KVxyXG4gICAgfSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5zZXJ2aWNlKCdVc2VyU3ZjJywgZnVuY3Rpb24oJGh0dHApIHtcclxuICAgICAgICB2YXIgc3ZjID0gdGhpc1xyXG4gICAgICAgIHN2Yy5nZXRVc2VyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy91c2VycycpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiR2V0VXNlciByZXNwb25zZS5kYXRhIFwiLCByZXNwb25zZS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBzdmMubG9naW4gPSBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9zZXNzaW9ucycsIHtcclxuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxyXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkxvZ2luOlwiLCByZXNwb25zZS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgc3ZjLnRva2VuID0gcmVzcG9uc2UuZGF0YVxyXG4gICAgICAgICAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aCddID0gcmVzcG9uc2UuZGF0YVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN2Yy5nZXRVc2VyKClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgc3ZjLnJlZ2lzdGVyID0gZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvdXNlcnMnLCB7XHJcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcclxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdmMubG9nb3V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1BdXRoJ11cclxuICAgICAgICB9XHJcbiAgICB9KSJdfQ==
